export EDITOR="$HOME/bin/editor.sh"
export VISUAL="$HOME/bin/editor.sh"

# Make some commands not show up in history
export HISTIGNORE="ls:cd:cd -:pwd:exit:date:* --help"

# Prefer US English and use UTF-8
export LANG="en_US"
export LC_ALL="en_US.UTF-8"
export __CF_USER_TEXT_ENCODING=$UID:0x8000100:0x8000100

# Always enable colored `grep` output
export GREP_OPTIONS="--color=auto"

# Homebrew vim
if [ -h "/usr/local/bin/vim" ]; then
    if [ `which vim` = "/usr/local/bin/vim" ]; then
        VIMLINK=`ls -l /usr/local/bin/vim | awk '{print $11}'`
        VIMDIR=`dirname $VIMLINK`
        export VIMRUNTIME="/usr/local/bin/$VIMDIR/../share/vim/vim74"
    fi
fi
#
# ENV VARIABLES
#

# JVM
# Mac locations:
# - /System/Library/Java/JavaVirtualMachines/
# - /Library/Java/JavaVirtualMachines
# Mint locations:
# - /usr/lib/jvm
if [ -z "$JAVA_HOME" ]; then
    vmdir=""
    vmtype=`uname`
    case "$vmtype" in
        "Linux" )
            vmdir="/usr/lib/jvm"
            ;;
        "Darwin" )
            vmdir="/Library/Java/JavaVirtualMachines"
            ;;
    esac
    if [ -z "$VM_VERSION" ]; then
        VM_VERSION="1.7"
    fi
    if [ -d "$vmdir" ]; then
        PJAVA_HOME=$(ls -1 "$vmdir" | grep "$VM_VERSION" | sort -r | head -1)
        if [ "$PJAVA_HOME" != "" ]; then
            case "$vmtype" in
                "Linux")
                    export JAVA_HOME="$vmdir/$PJAVA_HOME"
                    ;;
                "Darwin")
                    export JAVA_HOME="$vmdir/$PJAVA_HOME/Contents/Home"
                    ;;
            esac
        fi
    fi
fi

if [ -z "$ANT_HOME" ]; then
    ANT_HOME=$(find /usr/local/share/java -name "*ant*" -type d -depth 1)
    if [ -n "$ANT_HOME" ]; then
        export ANT_HOME
    fi
fi

if [ -z "$MVN_HOME" ]; then
    MVN_HOME=$(find /usr/local/share/java -name "*maven*" -type d -depth 1)
    if [ -n "$MVN_HOME" ]; then
        export MVN_HOME
    fi
fi

if [ \( -z "$GRADLE_HOME" \) -a \( -d "/usr/local/share/java/gradle-1.2" \) ]; then
    export GRADLE_HOME=/usr/local/share/java/gradle-1.2
    export GRADLE_OPTS="-Xmx1024m -Xms192m -XX:MaxPermSize=128m -XX:+CMSClassUnloadingEnabled"
fi

if [ \( -z "$SBT_HOME" \) -a \( -d "/usr/local/share/java/sbt" \) ]; then
    export SBT_HOME=/usr/local/share/java/sbt
fi

if [ \( -z "$CLOJURE_HOME" \) -a \( -d "/usr/local/share/java/clojure-1.4.0" \) ]; then
    export CLOJURE_HOME=/usr/local/share/java/clojure-1.4.0
fi
